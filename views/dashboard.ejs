<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nexion | Servers</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #1a1c1e; color: #e1e1e1; font-family: 'Inter', sans-serif; display: flex; margin: 0; min-height: 100vh; }
        .sidebar { width: 250px; background: #23272a; padding: 20px; border-right: 1px solid #333; }
        .main { flex: 1; padding: 40px; }
        .user-profile { display: flex; align-items: center; gap: 10px; background: #2c2f33; padding: 15px; border-radius: 10px; margin-bottom: 30px; }
        .user-profile img { border-radius: 50%; border: 2px solid #7289da; }
        .guild-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .guild-card { background: #2c2f33; border-radius: 12px; padding: 20px; text-align: center; text-decoration: none; color: white; border: 1px solid #3e4248; }
        .guild-icon { width: 70px; height: 70px; border-radius: 50%; margin-bottom: 10px; }
        .not-in { opacity: 0.4; filter: grayscale(100%); border-style: dashed; }
        .status-badge { font-size: 0.75rem; padding: 5px 12px; border-radius: 15px; background: #7289da; font-weight: bold; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Nexion Panel</h2>
        <a href="/logout" style="color: #ff4747; text-decoration: none;"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
    <div class="main">
        <div class="user-profile">
            <img src="https://cdn.discordapp.com/avatars/<%= user.id %>/<%= user.avatar %>.png" width="45">
            <strong><%= user.username %></strong>
        </div>
        <h1>Your Servers</h1>
        <div class="guild-grid">
            <% guilds.forEach(guild => { %>
                <a href="<%= guild.botInGuild ? '/dashboard/guild/' + guild.id : guild.inviteLink %>" class="guild-card <%= !guild.botInGuild ? 'not-in' : '' %>">
                    <% if (guild.icon) { %>
                        <img src="https://cdn.discordapp.com/icons/<%= guild.id %>/<%= guild.icon %>.png" class="guild-icon">
                    <% } else { %>
                        <div class="guild-icon" style="background: #7289da; display: flex; align-items: center; justify-content: center; margin: auto;"><%= guild.name[0] %></div>
                    <% } %>
                    <p><%= guild.name %></p>
                    <span class="status-badge"><%= guild.botInGuild ? 'Manage' : 'Invite Bot' %></span>
                </a>
            <% }); %>
        </div>
    </div>
</body>
</html>